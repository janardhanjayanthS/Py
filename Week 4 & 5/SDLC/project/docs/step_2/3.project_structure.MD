# Complete Project Structure Overview

## Architecture Pattern
This project follows a **Layered Architecture** pattern with clear separation of concerns using FastAPI, PostgreSQL, SQLAlchemy, and JWT authentication.

## ğŸ“ Complete Project Structure

```
EOW_project/

â”œâ”€â”€ ğŸ“ alembic/                     # Database migration files
â”‚   â”œâ”€â”€ ğŸ“ versions/                # Migration version files
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ 2024_01_01_000000_create_initial_tables.py  # Initial schema (2.1KB)
â”‚   â”‚   â””â”€â”€ ğŸ“„ ...                  # Additional migrations
â”‚   â”œâ”€â”€ ğŸ“„ env.py                   # Alembic environment configuration (3.5KB)
â”‚   â”œâ”€â”€ ğŸ“„ script.py.mako           # Migration script template (1.2KB)
â”‚   â””â”€â”€ ğŸ“„ README                   # Alembic documentation (0.5KB)
â”œâ”€â”€ ğŸ“ requirements/                # Dependencies management
â”‚   â”œâ”€â”€ ğŸ“„ requirements.txt         # Production dependencies (2.8KB)
â”‚   â””â”€â”€ ğŸ“„ dev_requirements.txt     # Development dependencies (1.1KB)
â”œâ”€â”€ ğŸ“ src/                         # Main application code
â”‚   â”œâ”€â”€ ğŸ“ api/                     # API Layer
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py          # Package initialization (0B)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ main.py              # FastAPI application entry point (1.2KB)
â”‚   â”‚   â””â”€â”€ ğŸ“ routes/              # API route definitions
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ __init__.py      # Package initialization (0B)
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ user.py          # User management endpoints (4.8KB)
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ category.py      # Category management endpoints (5.2KB)
â”‚   â”‚       â””â”€â”€ ğŸ“„ product.py       # Product management endpoints (5.6KB)
â”‚   â”œâ”€â”€ ğŸ“ core/                    # Core Configuration & Utilities
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py          # Package initialization (0B)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ config.py            # Application lifespan and startup (1.0KB)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ database.py          # Database connection and seeding (4.7KB)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ decorators.py        # Authentication decorators (9.5KB)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ jwt.py               # JWT token management (3.6KB)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ api_utility.py       # API helper functions (8.2KB)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ constants.py         # Application constants (0.8KB)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ excptions.py         # Custom exception classes (0.5KB)
â”‚   â”‚   â””â”€â”€ ğŸ“„ utility.py           # General utility functions (2.1KB)
â”‚   â”œâ”€â”€ ğŸ“ models/                  # Data Models (SQLAlchemy)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ __init__.py          # Package initialization (0B)
â”‚   â”‚   â””â”€â”€ ğŸ“„ models.py            # Database entity models (1.7KB)
â”‚   â””â”€â”€ ğŸ“ schema/                  # Data Validation (Pydantic)
â”‚       â”œâ”€â”€ ğŸ“„ __init__.py          # Package initialization (0B)
â”‚       â”œâ”€â”€ ğŸ“„ user.py              # User schemas and validation (5.1KB)
â”‚       â”œâ”€â”€ ğŸ“„ category.py          # Category schemas (1.1KB)
â”‚       â””â”€â”€ ğŸ“„ product.py           # Product schemas (2.4KB)
â”œâ”€â”€ ğŸ“ tests/                       # Test files
â”‚   â”œâ”€â”€ ğŸ“„ __init__.py              # Test package initialization (0B)
â”‚   â”œâ”€â”€ ğŸ“„ conftest.py              # Pytest configuration and fixtures (2.0KB)
â”‚   â”œâ”€â”€ ğŸ“„ test_auth.py             # Authentication tests (3.2KB)
â”‚   â”œâ”€â”€ ğŸ“„ test_categories.py       # Category CRUD tests (2.8KB)
â”‚   â”œâ”€â”€ ğŸ“„ test_products.py         # Product CRUD tests (3.5KB)
â”‚   â””â”€â”€ ğŸ“„ test_users.py            # User management tests (2.1KB)
â”œâ”€â”€ ğŸ“„ alembic.ini                  # Alembic configuration (5.9KB)
â”œâ”€â”€ ğŸ“„ README.MD                    # Project overview and setup (1.2KB)
â”œâ”€â”€ ğŸ“„ .env.example                 # Environment variables template (0.3KB)
â”œâ”€â”€ ğŸ“„ .gitignore                   # Git ignore patterns (1.8KB)
â”œâ”€â”€ ğŸ“„ pre-commit-config.yaml       # Pre-commit hooks configuration (1.1KB)
â”œâ”€â”€ ğŸ“„ ruff.toml                    # Code linting configuration (0.1KB)
â””â”€â”€ ğŸ“„ pytest.ini                   # Pytest configuration (0.2KB)

```

## ğŸ—‚ï¸ Folder Structure Explanation

### ğŸ“ **Root Level Structure**
The project follows a **standard Python package structure** with clear separation of concerns:

- **`README.MD`** - Project overview, setup instructions, and API documentation links
- **`.env.example`** - Environment variables template for database and JWT configuration
- **`alembic.ini`** - Database migration configuration
- **`.gitignore`** - Git ignore patterns for Python, virtual environments, and sensitive files
- **`pre-commit-config.yaml`** - Code quality hooks for linting and formatting
- **`ruff.toml`** - Ruff linting configuration
- **`pytest.ini`** - Pytest testing configuration

### ğŸ—„ï¸ **Database Migrations (`alembic/`)**
Alembic-based database schema management:

- **`versions/`** - Database migration files with timestamp-based naming
- **`env.py`** - Alembic environment configuration and database connection setup
- **`script.py.mako`** - Template for generating new migration files
- **`README`** - Alembic usage documentation

### ğŸ“¦ **Dependencies & Environment (`requirements/`)**
Split dependencies for production and development:

- **`requirements.txt`** - Core production dependencies (FastAPI, SQLAlchemy, JWT, etc.)
- **`dev_requirements.txt`** - Development dependencies (pytest, pre-commit, etc.)

### ğŸ’» **Source Code (`src/`)**
Layered architecture implementation with clear separation of concerns:

#### **`api/` - API Layer**
FastAPI application structure with route organization:

- **`main.py`** - FastAPI app initialization, middleware, exception handlers, and route registration
- **`routes/`** - API endpoint definitions organized by business domain:
  - **`user.py`** - Authentication endpoints (register, login, user management)
  - **`category.py`** - Category CRUD operations with role-based access
  - **`product.py`** - Product CRUD operations with filtering and category relationships

#### **`core/` - Core Configuration & Utilities**
Shared application components and utilities:

- **`config.py`** - Application lifespan management and database initialization
- **`database.py`** - Database connection, session management, password hashing, and data seeding
- **`decorators.py`** - JWT authentication decorators and role-based access control
- **`jwt.py`** - JWT token creation, validation, and expiration handling
- **`api_utility.py`** - Common API helper functions for user and data operations
- **`constants.py`** - Application-wide constants and enums
- **`excptions.py`** - Custom exception classes for specific error handling
- **`utility.py`** - General utility functions including password strength validation

#### **`models/` - Data Models (SQLAlchemy)**
Database entity definitions with relationships:

- **`models.py`** - Complete database schema:
  - **User** model with authentication fields and role management
  - **Category** model for product organization
  - **Product** model with foreign key relationship to Category

#### **`schema/` - Data Validation (Pydantic)**
Request/response validation schemas:

- **`user.py`** - User authentication and management schemas with password validation
- **`category.py`** - Category CRUD operation schemas
- **`product.py`** - Product CRUD operation schemas with validation rules

### ğŸ§ª **Testing (`tests/`)**
Comprehensive testing structure with fixtures and integration tests:

- **`conftest.py`** - Pytest configuration, database fixtures, and test utilities
- **`test_auth.py`** - Authentication system tests (registration, login, JWT validation)
- **`test_categories.py`** - Category CRUD operations and role-based access tests
- **`test_products.py`** - Product CRUD operations, filtering, and relationship tests
- **`test_users.py`** - User management and role-based access tests

## ğŸ”„ **Data Flow Architecture**

### **Request Flow**
1. **Client Request** â†’ FastAPI application
2. **Authentication** â†’ JWT validation via decorators
3. **Authorization** â†’ Role-based access control check
4. **Validation** â†’ Pydantic schema validation
5. **Business Logic** â†’ Route handlers process request
6. **Database Operations** â†’ SQLAlchemy ORM operations
7. **Response** â†’ Formatted JSON response with status

### **Authentication Flow**
1. **User Registration** â†’ Password hashing â†’ Database storage
2. **User Login** â†’ Credential verification â†’ JWT token generation
3. **Protected Routes** â†’ JWT validation â†’ Role authorization
4. **Token Expiration** â†’ 30-minute automatic expiration

### **Database Relationships**
- **Users** â†” **Products/Categories** (Application-level relationship)
- **Categories** â†’ **Products** (One-to-Many with CASCADE delete)

## ğŸ› ï¸ **Development Workflow**

### **Database Management**
```bash
# Create new migration
alembic revision --autogenerate -m "description"

# Apply migrations
alembic upgrade head

# Rollback migration
alembic downgrade -1
```

### **Testing**
```bash
# Run all tests
pytest

# Run with coverage
pytest --cov=src

# Run specific test file
pytest tests/test_auth.py
```

### **Code Quality**
```bash
# Run linting
ruff check src/

# Format code
ruff format src/

# Run pre-commit hooks
pre-commit run --all-files
```

## ğŸ“Š **Key Design Decisions**

### **Architecture Patterns**
- **Layered Architecture** - Clear separation between API, business logic, and data layers
- **Repository Pattern** - Data access abstraction through SQLAlchemy ORM
- **Dependency Injection** - FastAPI's dependency system for database sessions and authentication

### **Security Implementation**
- **JWT Authentication** - Stateless token-based authentication
- **Role-Based Access Control** - Three-tier permission system (Staff, Manager, Admin)
- **Password Security** - Bcrypt hashing with strength validation
- **Input Validation** - Comprehensive Pydantic schema validation

### **Database Design**
- **Relational Model** - PostgreSQL with foreign key relationships
- **Migration Management** - Alembic for version-controlled schema changes
- **Data Seeding** - CSV-based initial data population
- **Cascade Operations** - Automatic cleanup of related records

### **API Design**
- **RESTful Principles** - Standard HTTP methods and status codes
- **Consistent Responses** - Standardized JSON response format
- **Error Handling** - Comprehensive exception handling with proper HTTP status codes
- **Documentation** - Auto-generated OpenAPI/Swagger documentation

This structure provides a solid foundation for the Inventory Management System with clear separation of concerns, comprehensive testing, and production-ready configuration.