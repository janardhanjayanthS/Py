# Database Schema

## Users Table
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| `id` | INTEGER | PRIMARY KEY, AUTO_INCREMENT | Unique user identifier |
| `name` | VARCHAR(100) | UNIQUE, NOT NULL | User's full name |
| `email` | VARCHAR(150) | UNIQUE, NOT NULL | User email address for authentication |
| `password` | VARCHAR(255) | NOT NULL | Bcrypt hashed password |
| `role` | VARCHAR(10) | NOT NULL, DEFAULT 'staff' | User role (staff, manager, admin) |

### Users Table Indexes
```sql
CREATE INDEX idx_users_email ON user(email);
CREATE INDEX idx_users_name ON user(name);
CREATE INDEX idx_users_role ON user(role);
```

### Users Table Constraints
```sql
ALTER TABLE user 
ADD CONSTRAINT chk_user_role 
CHECK (role IN ('staff', 'manager', 'admin'));
```

## Product Category Table
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| `id` | INTEGER | PRIMARY KEY, AUTO_INCREMENT | Unique category identifier |
| `name` | VARCHAR(25) | UNIQUE, NULLABLE | Category name (converted to lowercase) |

### Product Category Table Indexes
```sql
CREATE INDEX idx_category_name ON product_category(name);
```

## Products Table
| Column | Type | Constraints | Description |
|--------|------|-------------|-------------|
| `id` | INTEGER | PRIMARY KEY, UNIQUE, AUTO_INCREMENT | Unique product identifier |
| `name` | VARCHAR(100) | NOT NULL | Product name |
| `quantity` | INTEGER | NOT NULL | Product quantity in stock |
| `price` | DECIMAL(10,2) | NOT NULL | Product price |
| `price_type` | VARCHAR(50) | NOT NULL, DEFAULT 'regular' | Price type (regular, sale, etc.) |
| `category_id` | INTEGER | FOREIGN KEY, NOT NULL | Reference to product_category.id |

### Products Table Indexes
```sql
CREATE INDEX idx_products_name ON product(name);
CREATE INDEX idx_products_category_id ON product(category_id);
CREATE INDEX idx_products_price ON product(price);
CREATE INDEX idx_products_quantity ON product(quantity);
CREATE INDEX idx_products_price_type ON product(price_type);
```

### Database Relationships
```sql
ALTER TABLE product 
ADD CONSTRAINT fk_products_category_id 
FOREIGN KEY (category_id) REFERENCES product_category(id) 
ON DELETE CASCADE;
```
